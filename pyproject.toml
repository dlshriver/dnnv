[build-system]
requires = ["flit"]
build-backend = "flit.buildapi"

[project]
name = "dnnv"
authors = [{ name = "David Shriver", email = "dls2fc@virginia.edu" }]
readme = "README.md"
license = { file = "LICENSE" }
classifiers = ["License :: OSI Approved :: MIT License"]
requires-python = ">=3.7"
dynamic = ["version", 'description']
keywords = ["DNN", "neural network", "verification"]
dependencies = [
    "numpy ~=1.18",
    "onnx ~=1.8,<1.9",
    "psutil ~=5.6",
    "scipy ~=1.5",
    "tensorflow ~=2.2,<2.3",
    "simpleparse ~=2.2",
    "torch ~=1.5",
    "torchvision ~=0.6",
]

[project.optional-dependencies]
all = [
    # default
    "numpy ~=1.18",
    "onnx ~=1.8,<1.9",
    "psutil ~=5.6",
    "scipy ~=1.5",
    "tensorflow ~=2.2",
    "simpleparse ~=2.2",
    "torch ~=1.5",
    "torchvision ~=0.6",
    # test
    "coverage~=5.5",
    "pytest~=6.2",
    "onnxruntime~=1.8",
    # dev
    "black~=21.7b0",
    "mypy~=0.910",
    # docs
    "sphinx",
]
test = ["coverage~=5.5", "pytest~=6.2", "onnxruntime~=1.8"]
dev = ["black~=21.7b0", "mypy~=0.910"]
docs = ["sphinx"]

[project.urls]
Documentation = "https://dnnv.readthedocs.io/en/latest/"
Source = "https://github.com/dlshriver/DNNV"

[project.scripts]
dnnv = "dnnv.__main__:_main"

[tool.coverage.run]
branch = true
command_line = "-m pytest new_tests tests/properties_tests tests/verifiers_tests --ff --verbose --import-mode=importlib --full-trace"
# command_line = "-m pytest new_tests --ff -x --verbose --import-mode=importlib --full-trace"
# command_line = "-m pytest new_tests/unit_tests/test_verifiers/test_common/test_reductions/test_iopolytope --ff --verbose --import-mode=importlib --full-trace"
# command_line = "-m pytest new_tests/unit_tests/test_verifiers new_tests/unit_tests/test_nn/test_analyzers new_tests/unit_tests/test_nn/test_converters new_tests/unit_tests/test_nn/test_graph new_tests/unit_tests/test_nn/test_layers new_tests/unit_tests/test_nn/test_operations new_tests/unit_tests/test_nn/test_transformers --ff --verbose --import-mode=importlib --full-trace"
parallel = true
source = ["dnnv"]
